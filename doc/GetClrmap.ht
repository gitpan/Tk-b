<HTML>
<! Copyright (c) 1994 The Regents of the University of California.-->
<! Copyright (c) 1994 Sun Microsystems, Inc.-->
<! See the file "license.terms" for information on usage and redistribution-->
<! of this file, and for a DISCLAIMER OF ALL WARRANTIES.-->
<! -->
<! @(#) GetClrmap.3 1.3 95/05/06 15:29:31-->
<! -->
<H1>Tk_GetColormap</H1>
<HR>
<A NAME=NAME><H2>NAME</H2>
</A>Tk_GetColormap, Tk_FreeColormap - allocate and free colormaps<BR>
<A NAME=SYNOPSIS><H2>SYNOPSIS</H2>
</A><BR>
<B>#include &lt;tk.h&gt;</B><BR>
<P>
Colormap<BR>
<B>Tk_GetColormap(</B><I>interp, tkwin, string</I><B>)</B><BR>
<P>
<B>Tk_FreeColormap(</B><I>display, colormap</I><B>)</B><BR>
<A NAME=ARGUMENTS><H2>ARGUMENTS</H2>
</A><DL>
<DT><CODE>Tcl_Interp *interp</CODE>
(in) <DD>Interpreter to use for error reporting.<BR>
<DT><CODE>Tk_Window tkwin</CODE>
(in) <DD>Token for window in which colormap will be used.<BR>
<DT><CODE>char *string</CODE>
(in) <DD>Selects a colormap:  either <B>new</B> or the name of a window<BR>
with the same screen and visual as <I>tkwin</I>.<BR>
<DT><CODE>Display *display</CODE>
(in) <DD>Display for which <I>colormap</I> was allocated.<BR>
<DT><CODE>Colormap colormap</CODE>
(in) <DD>Colormap to free;  must have been returned by a previous<BR>
call to <B>Tk_GetColormap</B> or <B>Tk_GetVisual</B>.<BR>
</DL>
<HR>
<BR>
<A NAME=DESCRIPTION><H2>DESCRIPTION</H2>
</A><P>
These procedures are used to manage colormaps.<BR>
<B>Tk_GetColormap</B> returns a colormap suitable for use in <I>tkwin</I>.<BR>
If its <I>string</I> argument is <B>new</B> then a new colormap is<BR>
created;  otherwise <I>string</I> must be the name of another window<BR>
with the same screen and visual as <I>tkwin</I>, and the colormap from that<BR>
window is returned.<BR>
If <I>string</I> doesn't make sense, or if it refers to a window on<BR>
a different screen from <I>tkwin</I> or with<BR>
a different visual than <I>tkwin</I>, then <B>Tk_GetColormap</B> returns<BR>
<B>None</B> and leaves an error message in <I>interp-&gt;result</I>.<BR>
<P>
<B>Tk_FreeColormap</B> should be called when a colormap returned by<BR>
<B>Tk_GetColormap</B> is no longer needed.<BR>
Tk maintains a reference count for each colormap returned by<BR>
<B>Tk_GetColormap</B>, so there should eventually be one call to<BR>
<B>Tk_FreeColormap</B> for each call to <B>Tk_GetColormap</B>.<BR>
When a colormap's reference count becomes zero, Tk releases the<BR>
X colormap.<BR>
<P>
<B>Tk_GetVisual</B> and <B>Tk_GetColormap</B> work together, in that<BR>
a new colormap created by <B>Tk_GetVisual</B> may later be returned<BR>
by <B>Tk_GetColormap</B>.<BR>
The reference counting mechanism for colormaps includes both procedures,<BR>
so callers of <B>Tk_GetVisual</B> must also call <B>Tk_FreeColormap</B><BR>
to release the colormap.<BR>
If <B>Tk_GetColormap</B> is called with a <I>string</I> value of<BR>
<B>new</B> then the resulting colormap will never<BR>
be returned by <B>Tk_GetVisual</B>;  however, it can be used in other<BR>
windows by calling <B>Tk_GetColormap</B> with the original window's<BR>
name as <I>string</I>.<BR>
<BR>
<A NAME=KEYWORDS><H2>KEYWORDS</H2>
</A>colormap<BR>
